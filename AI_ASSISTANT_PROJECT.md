# –ò–ò –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç - –ü—Ä–æ–µ–∫—Ç –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ü–æ–º–æ—â–Ω–∏–∫–∞

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –∑–∞–¥–∞—á –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ChatGPT –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –∏ –∏–º–µ–µ—Ç –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–º—è—Ç—å –æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä—É—Ç–∏–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø—ã—Ç–∞ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –ø–∞–º—è—Ç–∏ –∏ –æ–±—É—á–µ–Ω–∏—è
- –ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å (—Ä–∞–±–æ—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤)

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–û–±—â–µ–Ω–∏–µ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ** - –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ
- **–î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å** - –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π, –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ** - —É—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏ —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ Whisper API
- **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤

### 2. –†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- **Excel —Ñ–∞–π–ª—ã**
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü (–ª–∏–º–∏—Ç 10MB)
  - –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
  - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤
  - –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- **PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã** - —á—Ç–µ–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (–ª–∏–º–∏—Ç 5MB)
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ GPT-4 Vision (–ª–∏–º–∏—Ç 20MB)

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ (Multi-Provider)
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
  - Apple iCloud (CardDAV)
  - Google Contacts (Google People API)
  - Microsoft Outlook (Microsoft Graph API)
  - –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–±–µ–∑ –æ–±–ª–∞–∫–∞)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (—Ñ–æ—Ä–º–∞—Ç vCard)
- –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º —Å –Ω–µ—á–µ—Ç–∫–∏–º –ø–æ–∏—Å–∫–æ–º
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –¥–∞—Ç–∞—Ö (–¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è –∏ —Ç.–¥.)

### 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º (Multi-Provider)
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
  - Apple Calendar (CalDAV)
  - Google Calendar (Google Calendar API)
  - Microsoft Outlook (Microsoft Graph API)
  - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π CalDAV (Nextcloud, ownCloud)
  - –õ–æ–∫–∞–ª—å–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å (–±–µ–∑ –æ–±–ª–∞–∫–∞)
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∏ –≤—Å—Ç—Ä–µ—á
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–æ–±—ã—Ç–∏–π
- –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –†–∞–±–æ—Ç–∞ —Å –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–º–∏—Å—è —Å–æ–±—ã—Ç–∏—è–º–∏

### 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏**
  - –°–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –¥–µ–ª
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –¥–µ–¥–ª–∞–π–Ω–∞—Ö

- **–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—á–µ—Ç**
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤
  - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞
  - –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
  - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è**
  - –£–º–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  - –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º

---

## üéØ –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–∏—Ö —Ü–µ–ª–µ–π –∏ —Ä–µ—Å—É—Ä—Å–æ–≤:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (MVP –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞)
**–¶–µ–ª—å:** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –∑–∞ 4-6 –Ω–µ–¥–µ–ª—å
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:** ~$30-70/–º–µ—Å—è—Ü
**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–¥–µ–∏, –æ–±—É—á–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (Production-ready)
**–¶–µ–ª—å:** –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–µ enterprise-—Ä–µ—à–µ–Ω–∏–µ
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è
**–°—Ç–æ–∏–º–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:** ~$330-580/–º–µ—Å—è—Ü
**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** –ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–π –ø—Ä–æ–¥—É–∫—Ç, –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

# üì¶ –í–ê–†–ò–ê–ù–¢ 1: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (MVP)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏

‚úÖ **–ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:**
- –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –∏ ChatGPT
- –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–∞–º—è—Ç–∏ (SQLite + —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ)
- –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –∫–∞–ª–µ–Ω–¥–∞—Ä—å, –∫–æ–Ω—Ç–∞–∫—Ç—ã, Excel
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è 1-20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (unit tests)
- –ë–∞–∑–æ–≤—ã–π error handling
- –ü—Ä–æ—Å—Ç–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è/–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞ –≤—ã–±–æ—Ä

‚ùå **–ß—Ç–æ —É–ø—É—â–µ–Ω–æ (–¥–æ–±–∞–≤–∏—Ç—Å—è –≤ Pro –≤–µ—Ä—Å–∏–∏):**
- –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –ø–∞–º—è—Ç–∏
- Multi-agent –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞—Ç—Ä–∞—Ç
- Production monitoring (Prometheus/Grafana)
- –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç—ã—Å—è—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- CI/CD pipeline

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### Backend
- **Python 3.10+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **python-telegram-bot 22.3+** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Telegram Bot API
- **OpenAI API** - ChatGPT (gpt-4o-mini –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏, fallback –Ω–∞ Claude)
- **SQLite** - –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** - —Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```python
# Core
python-telegram-bot==22.3
openai==1.54.0
anthropic==0.25.0          # Fallback LLM
python-dotenv==1.0.0

# Data & Storage
sqlalchemy==2.0.23
cryptography==42.0.0       # –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
openpyxl==3.1.2           # –†–∞–±–æ—Ç–∞ —Å Excel

# Integrations (–≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ)
caldav==1.3.9             # Apple/Universal Calendar
google-api-python-client==2.100.0  # Google Calendar
vobject==0.9.7            # vCard –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

# Reliability
tenacity==8.2.3           # Retry –ª–æ–≥–∏–∫–∞
ratelimit==2.2.1          # Rate limiting

# Testing
pytest==7.4.3
pytest-asyncio==0.21.1
pytest-mock==3.12.0

# Logging
structlog==23.3.0
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```python
pandas==2.1.4             # –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
Pillow==10.1.0            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
PyPDF2==3.0.1             # –ß—Ç–µ–Ω–∏–µ PDF
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Telegram Bot                         ‚îÇ
‚îÇ                   (User Interface)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Bot Dispatcher                         ‚îÇ
‚îÇ            (python-telegram-bot)                        ‚îÇ
‚îÇ         + Rate Limiter + Error Handler                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  LLM Handler                            ‚îÇ
‚îÇ     Primary: ChatGPT | Fallback: Claude                 ‚îÇ
‚îÇ              + Retry Logic                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ                  ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
    ‚ñº          ‚ñº        ‚ñº         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇExcel   ‚îÇ ‚îÇCalendar‚îÇ ‚îÇContacts‚îÇ ‚îÇMemory  ‚îÇ
‚îÇHandler ‚îÇ ‚îÇProvider‚îÇ ‚îÇProvider‚îÇ ‚îÇManager ‚îÇ
‚îÇ        ‚îÇ ‚îÇ(Abstract)‚îÇ(Abstract)‚îÇ(Encrypted)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   SQLite    ‚îÇ
        ‚îÇ (Encrypted) ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  File Store ‚îÇ
        ‚îÇ(User Files) ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è)

```
ai-assistant-simple/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ requirements-dev.txt      # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ pytest.ini
‚îú‚îÄ‚îÄ setup.py
‚îÇ
‚îú‚îÄ‚îÄ bot.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot_handler.py    # –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error_handler.py  # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rate_limiter.py   # Rate limiting
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.py         # Structured logging
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ llm/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py           # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π LLM provider
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai_client.py  # OpenAI implementation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ claude_client.py  # Anthropic Claude fallback
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ retry.py          # Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è LLM
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ providers/            # –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π –∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py       # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π CalendarProvider
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ apple.py      # Apple Calendar (CalDAV)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ google.py     # Google Calendar
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ local.py      # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ contacts/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ base.py       # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π ContactsProvider
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ apple.py      # iCloud Contacts
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ google.py     # Google Contacts
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ local.py      # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ excel_handler.py  # –†–∞–±–æ—Ç–∞ —Å Excel + validation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pdf_handler.py    # –†–∞–±–æ—Ç–∞ —Å PDF
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ image_handler.py  # –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py         # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.py     # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ encryption.py     # –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations.py     # –ü—Ä–æ—Å—Ç—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ memory/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manager.py        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é —Å lock
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ storage.py        # –•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–∞–º—è—Ç–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ security/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input_validator.py  # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ secrets.py        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ helpers.py
‚îÇ       ‚îú‚îÄ‚îÄ constants.py
‚îÇ       ‚îî‚îÄ‚îÄ i18n.py           # –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ locales/                  # –Ø–∑—ã–∫–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ ru.json
‚îÇ   ‚îî‚îÄ‚îÄ en.json
‚îÇ
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ database.db           # SQLite (encrypted)
‚îÇ   ‚îú‚îÄ‚îÄ logs/                 # –õ–æ–≥–∏
‚îÇ   ‚îî‚îÄ‚îÄ user_files/           # –§–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ       ‚îî‚îÄ‚îÄ user_123/
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py           # Fixtures
‚îÇ   ‚îú‚îÄ‚îÄ mocks/                # Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è OpenAI, –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai_responses.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ calendar_data.json
‚îÇ   ‚îú‚îÄ‚îÄ test_bot.py
‚îÇ   ‚îú‚îÄ‚îÄ test_llm.py
‚îÇ   ‚îú‚îÄ‚îÄ test_providers.py
‚îÇ   ‚îú‚îÄ‚îÄ test_modules.py
‚îÇ   ‚îî‚îÄ‚îÄ test_security.py
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ setup.sh              # –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ backup.sh             # Backup –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ health_check.py       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
‚îÇ
‚îî‚îÄ‚îÄ docs/
    ‚îú‚îÄ‚îÄ SETUP.md
    ‚îú‚îÄ‚îÄ TESTING.md
    ‚îú‚îÄ‚îÄ TROUBLESHOOTING.md
    ‚îú‚îÄ‚îÄ FAQ.md
    ‚îî‚îÄ‚îÄ SECURITY.md
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- Python 3.10+
- Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ @BotFather)
- OpenAI API Key
- Git

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–æ–¥–∏–Ω –Ω–∞ –≤—ã–±–æ—Ä):**
- iCloud –∞–∫–∫–∞—É–Ω—Ç + App-Specific Password (–¥–ª—è Apple Calendar/Contacts)
- Google Cloud –∞–∫–∫–∞—É–Ω—Ç + OAuth credentials (–¥–ª—è Google Calendar/Contacts)
- Microsoft –∞–∫–∫–∞—É–Ω—Ç + App registration (–¥–ª—è Outlook Calendar/Contacts)

### 2. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/yourusername/ai-assistant-simple.git
cd ai-assistant-simple

# 2. –ó–∞–ø—É—Å–∫ setup —Å–∫—Ä–∏–ø—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
chmod +x scripts/setup.sh
./scripts/setup.sh

# –ò–ª–∏ —Ä—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:

# 3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏ venv\Scripts\activate  # Windows

# 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
pip install -r requirements-dev.txt  # –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

# 5. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env (—Å–º. –Ω–∏–∂–µ)

# 6. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python -c "from src.database.connection import init_db; init_db()"

# 7. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (—É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç)
pytest

# 8. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python bot.py
```

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .env

```env
# ==============================================
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# ==============================================

# Telegram
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_ADMIN_ID=your_telegram_user_id

# OpenAI (Primary LLM)
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=2000
OPENAI_TIMEOUT=30

# Anthropic Claude (Fallback LLM)
ANTHROPIC_API_KEY=sk-ant-...
ANTHROPIC_MODEL=claude-3-haiku-20240307

# Security
SECRET_KEY=generate_random_32_char_key_here
ENCRYPTION_KEY=generate_random_32_byte_key_here
ALLOWED_USER_IDS=123456,789012  # Comma-separated Telegram user IDs

# ==============================================
# PROVIDER SETTINGS (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ)
# ==============================================

# Apple (CalDAV/CardDAV)
CALENDAR_PROVIDER=apple  # –∏–ª–∏ google, microsoft, local
CONTACTS_PROVIDER=apple  # –∏–ª–∏ google, microsoft, local

APPLE_USERNAME=your_email@icloud.com
APPLE_PASSWORD=your_app_specific_password
CALDAV_URL=https://caldav.icloud.com
CARDDAV_URL=https://contacts.icloud.com

# Google (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Google)
# GOOGLE_CREDENTIALS_FILE=credentials.json
# GOOGLE_TOKEN_FILE=token.json

# Microsoft (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Microsoft)
# MICROSOFT_CLIENT_ID=your_client_id
# MICROSOFT_CLIENT_SECRET=your_client_secret
# MICROSOFT_TENANT_ID=your_tenant_id

# ==============================================
# –û–ü–¶–ò–û–ù–ê–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
# ==============================================

# Application
APP_NAME=AI Assistant
DEFAULT_LANGUAGE=ru  # ru –∏–ª–∏ en
DEBUG=false
LOG_LEVEL=INFO

# Rate Limiting
RATE_LIMIT_MESSAGES=30  # —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
RATE_LIMIT_GLOBAL=100   # —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É –≥–ª–æ–±–∞–ª—å–Ω–æ

# File Limits
MAX_EXCEL_SIZE_MB=10
MAX_PDF_SIZE_MB=5
MAX_IMAGE_SIZE_MB=20

# Database
DATABASE_PATH=data/database.db
DATABASE_BACKUP_ENABLED=true
DATABASE_BACKUP_INTERVAL_HOURS=6

# Logging
LOG_FILE=data/logs/bot.log
LOG_ROTATION_SIZE_MB=50
LOG_RETENTION_DAYS=30

# Cost Tracking
OPENAI_BUDGET_MONTHLY=50.00
OPENAI_ALERT_THRESHOLD=80  # –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –±—é–¥–∂–µ—Ç–∞

# Features (enable/disable)
ENABLE_VOICE_MESSAGES=false
ENABLE_IMAGE_ANALYSIS=false
ENABLE_PDF_PROCESSING=true
ENABLE_EXCEL_PROCESSING=true

# Alert Settings (–æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –∞–¥–º–∏–Ω—É)
SEND_ERROR_ALERTS=true
SEND_BUDGET_ALERTS=true
SEND_DAILY_SUMMARY=true
```

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

#### Telegram Bot Token
1. –û—Ç–∫—Ä—ã—Ç—å Telegram, –Ω–∞–π—Ç–∏ @BotFather
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/newbot`
3. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω

#### OpenAI API Key
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ [platform.openai.com](https://platform.openai.com)
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ API Keys
3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Usage Limits (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è $50/–º–µ—Å—è—Ü –¥–ª—è –Ω–∞—á–∞–ª–∞)

#### Anthropic API Key (Fallback)
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ [console.anthropic.com](https://console.anthropic.com)
2. –°–æ–∑–¥–∞—Ç—å API key
3. –î–æ–±–∞–≤–∏—Ç—å –≤ .env

#### Apple App-Specific Password
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ [appleid.apple.com](https://appleid.apple.com)
2. –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –†–∞–∑–¥–µ–ª "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" ‚Üí "–ü–∞—Ä–æ–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"
4. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "AI Assistant"
5. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å 16-—Å–∏–º–≤–æ–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å (–±–µ–∑ –¥–µ—Ñ–∏—Å–æ–≤)

#### Google Calendar/Contacts
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ [Google Cloud Console](https://console.cloud.google.com)
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –í–∫–ª—é—á–∏—Ç—å Google Calendar API –∏/–∏–ª–∏ People API
4. –°–æ–∑–¥–∞—Ç—å OAuth 2.0 credentials
5. –°–∫–∞—á–∞—Ç—å `credentials.json` –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
6. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–π—Ç–∏ OAuth flow

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å health check
python scripts/health_check.py

# –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏:
# ‚úÖ Configuration valid
# ‚úÖ Database accessible
# ‚úÖ OpenAI API working
# ‚úÖ Claude API working (fallback)
# ‚úÖ Telegram bot token valid
# ‚úÖ Calendar provider configured
# ‚úÖ All systems operational
```

## –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –±–æ—Ç–∞ (bot.py)

```python
#!/usr/bin/env python3
"""
AI Assistant Bot - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
"""
import asyncio
import os
import sys
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()

from src.core.bot_handler import BotHandler
from src.core.logger import setup_logger
from src.core.error_handler import setup_error_handlers
from src.database.connection import init_db

logger = setup_logger(__name__)


async def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    try:
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        logger.info("Initializing database...")
        await init_db()

        # –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
        logger.info("Starting bot...")
        bot = BotHandler()

        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ—à–∏–±–æ–∫
        setup_error_handlers(bot.application)

        # –ó–∞–ø—É—Å–∫
        await bot.start()

    except KeyboardInterrupt:
        logger.info("Bot stopped by user")
    except Exception as e:
        logger.error(f"Fatal error: {e}", exc_info=True)
        sys.exit(1)


if __name__ == '__main__':
    asyncio.run(main())
```

### Core Bot Handler (src/core/bot_handler.py)

```python
import os
import logging
from telegram import Update
from telegram.ext import (
    Application,
    CommandHandler,
    MessageHandler,
    filters,
    ContextTypes
)

from src.core.rate_limiter import RateLimiter
from src.llm.openai_client import OpenAIClient
from src.llm.claude_client import ClaudeClient
from src.memory.manager import MemoryManager
from src.security.input_validator import InputValidator
from src.providers.calendar.base import get_calendar_provider
from src.providers.contacts.base import get_contacts_provider
from src.utils.i18n import get_translator

logger = logging.getLogger(__name__)


class BotHandler:
    """–ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–æ—Ç–∞"""

    def __init__(self):
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        self.token = os.getenv('TELEGRAM_BOT_TOKEN')
        self.admin_id = int(os.getenv('TELEGRAM_ADMIN_ID'))
        self.allowed_users = self._load_allowed_users()

        # LLM –∫–ª–∏–µ–Ω—Ç—ã
        self.primary_llm = OpenAIClient()
        self.fallback_llm = ClaudeClient()

        # –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
        self.rate_limiter = RateLimiter()
        self.memory_manager = MemoryManager()
        self.input_validator = InputValidator()

        # Providers
        self.calendar = get_calendar_provider()
        self.contacts = get_contacts_provider()

        # Application
        self.application = Application.builder().token(self.token).build()
        self._register_handlers()

    def _load_allowed_users(self) -> set:
        """–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"""
        users_str = os.getenv('ALLOWED_USER_IDS', '')
        if not users_str:
            return {self.admin_id}

        return {int(uid.strip()) for uid in users_str.split(',') if uid.strip()}

    def _register_handlers(self):
        """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–æ–º–∞–Ω–¥"""
        app = self.application

        # –ö–æ–º–∞–Ω–¥—ã
        app.add_handler(CommandHandler("start", self.cmd_start))
        app.add_handler(CommandHandler("help", self.cmd_help))
        app.add_handler(CommandHandler("settings", self.cmd_settings))
        app.add_handler(CommandHandler("stats", self.cmd_stats))
        app.add_handler(CommandHandler("export", self.cmd_export_data))
        app.add_handler(CommandHandler("delete", self.cmd_delete_data))

        # Admin –∫–æ–º–∞–Ω–¥—ã
        app.add_handler(CommandHandler("add_user", self.cmd_add_user))
        app.add_handler(CommandHandler("remove_user", self.cmd_remove_user))
        app.add_handler(CommandHandler("broadcast", self.cmd_broadcast))

        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
        app.add_handler(
            MessageHandler(
                filters.TEXT & ~filters.COMMAND,
                self.handle_message
            )
        )

        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
        app.add_handler(
            MessageHandler(
                filters.Document.ALL,
                self.handle_document
            )
        )

    async def cmd_start(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
        user_id = update.effective_user.id

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞
        if user_id not in self.allowed_users:
            await update.message.reply_text(
                "‚õî –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É –±–æ—Ç—É.\n"
                "–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞."
            )
            return

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞ –¥–ª—è —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        t = get_translator(update.effective_user.language_code)

        welcome_text = t('welcome_message').format(
            name=update.effective_user.first_name
        )

        await update.message.reply_text(welcome_text)

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
        if not await self.memory_manager.user_exists(user_id):
            await self._onboarding_flow(update, context)

    async def _onboarding_flow(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–ü—Ä–æ—Ü–µ—Å—Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        t = get_translator(update.effective_user.language_code)

        await update.message.reply_text(t('onboarding_step1'))
        # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

    async def handle_message(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
        user_id = update.effective_user.id

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞
        if user_id not in self.allowed_users:
            return

        # Rate limiting
        if not await self.rate_limiter.check(user_id):
            await update.message.reply_text(
                "‚è± –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ."
            )
            return

        user_message = update.message.text

        # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        if not self.input_validator.validate_message(user_message):
            await update.message.reply_text(
                "‚ùå –°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ."
            )
            return

        try:
            # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º typing indicator
            await update.message.chat.send_action("typing")

            # –ü–æ–ª—É—á–∞–µ–º –ø–∞–º—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π)
            async with self.memory_manager.lock(user_id):
                memory = await self.memory_manager.get_memory(user_id)

                # –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM
                messages = self._build_context(user_message, memory)

                # –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç primary LLM
                try:
                    response = await self.primary_llm.chat(messages)
                except Exception as e:
                    logger.warning(f"Primary LLM failed: {e}, using fallback")
                    # Fallback –Ω–∞ Claude
                    response = await self.fallback_llm.chat(messages)

                # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–∞–º—è—Ç—å
                await self.memory_manager.add_conversation(
                    user_id, user_message, response
                )

            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
            await update.message.reply_text(response)

        except Exception as e:
            logger.error(f"Error handling message: {e}", exc_info=True)
            await update.message.reply_text(
                "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è. "
                "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω."
            )

            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º alert –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
            if os.getenv('SEND_ERROR_ALERTS') == 'true':
                await self._send_error_alert(e, user_id, user_message)

    def _build_context(self, user_message: str, memory: dict) -> list:
        """–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è LLM"""
        messages = [
            {
                "role": "system",
                "content": (
                    "–¢—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. "
                    "–ü–æ–º–æ–≥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –∑–∞–¥–∞—á–∞–º–∏, –∑–∞–ø–æ–º–∏–Ω–∞–π –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. "
                    "–ë—É–¥—å –≤–µ–∂–ª–∏–≤—ã–º, –∫—Ä–∞—Ç–∫–∏–º –∏ –ø–æ–ª–µ–∑–Ω—ã–º. "
                    "–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º, –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏–ª–∏ —Ñ–∞–π–ª–∞–º–∏ - "
                    "–∏—Å–ø–æ–ª—å–∑—É–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã."
                )
            }
        ]

        # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
        for conv in memory.get("conversations", [])[-5:]:
            messages.append({"role": "user", "content": conv["user"]})
            messages.append({"role": "assistant", "content": conv["assistant"]})

        # –¢–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        messages.append({"role": "user", "content": user_message})

        return messages

    async def _send_error_alert(self, error: Exception, user_id: int, message: str):
        """–û—Ç–ø—Ä–∞–≤–∫–∞ alert –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É"""
        alert_text = (
            f"üö® ERROR ALERT\n\n"
            f"User: {user_id}\n"
            f"Message: {message[:100]}...\n"
            f"Error: {str(error)[:200]}"
        )

        try:
            await self.application.bot.send_message(
                chat_id=self.admin_id,
                text=alert_text
            )
        except Exception as e:
            logger.error(f"Failed to send alert: {e}")

    async def start(self):
        """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
        logger.info("Starting bot polling...")
        await self.application.run_polling(drop_pending_updates=True)

    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (cmd_help, cmd_settings, etc.)
```

### LLM Client —Å Retry (src/llm/openai_client.py)

```python
import os
import logging
from typing import List, Dict
from openai import AsyncOpenAI
from tenacity import (
    retry,
    stop_after_attempt,
    wait_exponential,
    retry_if_exception_type
)

logger = logging.getLogger(__name__)


class OpenAIClient:
    """OpenAI –∫–ª–∏–µ–Ω—Ç —Å retry –ª–æ–≥–∏–∫–æ–π"""

    def __init__(self):
        self.client = AsyncOpenAI(
            api_key=os.getenv('OPENAI_API_KEY'),
            timeout=int(os.getenv('OPENAI_TIMEOUT', 30))
        )
        self.model = os.getenv('OPENAI_MODEL', 'gpt-4o-mini')
        self.max_tokens = int(os.getenv('OPENAI_MAX_TOKENS', 2000))

    @retry(
        stop=stop_after_attempt(3),
        wait=wait_exponential(multiplier=1, min=2, max=10),
        retry=retry_if_exception_type((Exception,)),
        reraise=True
    )
    async def chat(self, messages: List[Dict[str, str]]) -> str:
        """
        –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ ChatGPT —Å retry –ª–æ–≥–∏–∫–æ–π

        Args:
            messages: –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

        Returns:
            –û—Ç–≤–µ—Ç –æ—Ç –º–æ–¥–µ–ª–∏

        Raises:
            Exception: –ü—Ä–∏ –Ω–µ—É–¥–∞—á–µ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫
        """
        try:
            logger.info(f"Sending request to OpenAI (model: {self.model})")

            response = await self.client.chat.completions.create(
                model=self.model,
                messages=messages,
                max_tokens=self.max_tokens,
                temperature=0.7
            )

            answer = response.choices[0].message.content

            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
            usage = response.usage
            logger.info(
                f"OpenAI response received. "
                f"Tokens: {usage.total_tokens} "
                f"(prompt: {usage.prompt_tokens}, "
                f"completion: {usage.completion_tokens})"
            )

            return answer

        except Exception as e:
            logger.error(f"OpenAI API error: {e}")
            raise
```

### Memory Manager —Å Lock (src/memory/manager.py)

```python
import asyncio
import logging
from typing import Dict, Optional
from contextlib import asynccontextmanager

from src.database.models import User, Conversation
from src.database.connection import get_session
from src.database.encryption import encrypt_data, decrypt_data

logger = logging.getLogger(__name__)


class MemoryManager:
    """–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–º—è—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç race conditions"""

    def __init__(self):
        self.locks: Dict[int, asyncio.Lock] = {}

    @asynccontextmanager
    async def lock(self, user_id: int):
        """–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        if user_id not in self.locks:
            self.locks[user_id] = asyncio.Lock()

        async with self.locks[user_id]:
            yield

    async def user_exists(self, user_id: int) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        async with get_session() as session:
            result = await session.get(User, user_id)
            return result is not None

    async def get_memory(self, user_id: int) -> Dict:
        """
        –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

        –í–ê–ñ–ù–û: –í—ã–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ lock(user_id) –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞!
        """
        async with get_session() as session:
            # –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            user = await session.get(User, user_id)

            if not user:
                # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                user = User(id=user_id, preferences={})
                session.add(user)
                await session.commit()

            # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã
            conversations = await session.execute(
                select(Conversation)
                .where(Conversation.user_id == user_id)
                .order_by(Conversation.timestamp.desc())
                .limit(50)
            )

            conv_list = []
            for conv in conversations.scalars():
                conv_list.append({
                    "user": decrypt_data(conv.user_message),
                    "assistant": decrypt_data(conv.assistant_message),
                    "timestamp": conv.timestamp.isoformat()
                })

            return {
                "conversations": list(reversed(conv_list)),
                "preferences": user.preferences or {}
            }

    async def add_conversation(
        self,
        user_id: int,
        user_message: str,
        assistant_message: str
    ):
        """
        –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –≤ –ø–∞–º—è—Ç—å

        –í–ê–ñ–ù–û: –í—ã–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ lock(user_id) –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞!
        """
        async with get_session() as session:
            # –®–∏—Ñ—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            encrypted_user_msg = encrypt_data(user_message)
            encrypted_assistant_msg = encrypt_data(assistant_message)

            # –°–æ–∑–¥–∞–µ–º –∑–∞–ø–∏—Å—å
            conversation = Conversation(
                user_id=user_id,
                user_message=encrypted_user_msg,
                assistant_message=encrypted_assistant_msg
            )

            session.add(conversation)
            await session.commit()

            logger.debug(f"Saved conversation for user {user_id}")
```

### Calendar Provider Abstraction (src/providers/calendar/base.py)

```python
from abc import ABC, abstractmethod
from typing import List, Dict, Optional
from datetime import datetime
import os


class CalendarProvider(ABC):
    """–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π"""

    @abstractmethod
    async def create_event(
        self,
        title: str,
        start: datetime,
        end: datetime,
        description: Optional[str] = None,
        location: Optional[str] = None
    ) -> str:
        """
        –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ

        Returns:
            ID —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
        """
        pass

    @abstractmethod
    async def get_events(
        self,
        start_date: datetime,
        end_date: datetime
    ) -> List[Dict]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥"""
        pass

    @abstractmethod
    async def update_event(self, event_id: str, **kwargs) -> bool:
        """–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"""
        pass

    @abstractmethod
    async def delete_event(self, event_id: str) -> bool:
        """–£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"""
        pass

    @abstractmethod
    async def search_free_time(
        self,
        start_date: datetime,
        end_date: datetime,
        duration_minutes: int
    ) -> List[Dict]:
        """–ü–æ–∏—Å–∫ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏"""
        pass


def get_calendar_provider() -> CalendarProvider:
    """Factory –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è"""
    provider_type = os.getenv('CALENDAR_PROVIDER', 'local').lower()

    if provider_type == 'apple':
        from .apple import AppleCalendarProvider
        return AppleCalendarProvider()
    elif provider_type == 'google':
        from .google import GoogleCalendarProvider
        return GoogleCalendarProvider()
    elif provider_type == 'local':
        from .local import LocalCalendarProvider
        return LocalCalendarProvider()
    else:
        raise ValueError(f"Unknown calendar provider: {provider_type}")
```

### Input Validator (src/security/input_validator.py)

```python
import re
import logging
from typing import Optional

logger = logging.getLogger(__name__)


class InputValidator:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –¥–ª–∏–Ω—ã
    MAX_MESSAGE_LENGTH = 4000
    MAX_FILE_NAME_LENGTH = 255

    # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
    DANGEROUS_PATTERNS = [
        r'<script',
        r'javascript:',
        r'onclick=',
        r'onerror=',
        r'\x00',  # null byte
    ]

    def validate_message(self, text: str) -> bool:
        """
        –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

        Args:
            text: –¢–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

        Returns:
            True –µ—Å–ª–∏ –≤–∞–ª–∏–¥–Ω–æ, False –∏–Ω–∞—á–µ
        """
        if not text:
            return False

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã
        if len(text) > self.MAX_MESSAGE_LENGTH:
            logger.warning(f"Message too long: {len(text)} chars")
            return False

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
        for pattern in self.DANGEROUS_PATTERNS:
            if re.search(pattern, text, re.IGNORECASE):
                logger.warning(f"Dangerous pattern detected: {pattern}")
                return False

        return True

    def validate_file_name(self, filename: str) -> bool:
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞"""
        if not filename:
            return False

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã
        if len(filename) > self.MAX_FILE_NAME_LENGTH:
            return False

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ path traversal
        if '..' in filename or '/' in filename or '\\' in filename:
            logger.warning(f"Path traversal attempt: {filename}")
            return False

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
        allowed_extensions = {'.xlsx', '.xls', '.pdf', '.png', '.jpg', '.jpeg'}
        ext = filename[filename.rfind('.'):].lower()

        if ext not in allowed_extensions:
            logger.warning(f"Disallowed file extension: {ext}")
            return False

        return True

    def sanitize_string(self, text: str) -> str:
        """–°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫–∏ (—É–¥–∞–ª–µ–Ω–∏–µ –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤)"""
        # –£–¥–∞–ª—è–µ–º null bytes
        text = text.replace('\x00', '')

        # –£–¥–∞–ª—è–µ–º —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Å–∏–º–≤–æ–ª—ã (–∫—Ä–æ–º–µ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫)
        text = ''.join(char for char in text if ord(char) >= 32 or char in '\n\r\t')

        return text
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

```markdown
## –£—Ä–æ–≤–Ω–∏ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏:

1. **Full Functionality** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
   - OpenAI –¥–æ—Å—Ç—É–ø–µ–Ω
   - –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∫–∞–ª–µ–Ω–¥–∞—Ä—è/–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞

2. **Limited Mode** - OpenAI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
   - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Claude (fallback)
   - –ï—Å–ª–∏ Claude —Ç–æ–∂–µ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –ø—Ä–æ—Å—Ç—ã–µ –æ—Ç–≤–µ—Ç—ã –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤
   - –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

3. **Read-Only Mode** - –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
   - LLM —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –∫—ç—à–∞
   - –ù–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å

4. **Emergency Mode** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ–π
   - –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (/help, /status)
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–ª–µ—Ä—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

## Retry Policies:

### OpenAI API:
- 3 –ø–æ–ø—ã—Ç–∫–∏ —Å exponential backoff (2s, 4s, 8s)
- –ü–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–∏ ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Claude
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

### Claude API (fallback):
- 2 –ø–æ–ø—ã—Ç–∫–∏ —Å backoff
- –ü–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–∏ ‚Üí —à–∞–±–ª–æ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

### CalDAV/CardDAV:
- 5 –ø–æ–ø—ã—Ç–æ–∫ —Å backoff
- Timeout 10 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ø–æ–ø—ã—Ç–∫—É
- –ü–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–∏ ‚Üí –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### Database:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect
- Connection pooling
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å rollback

## Error Recovery:

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:
```python
# –ü—Ä–∏–º–µ—Ä –∏–∑ –∫–æ–¥–∞
try:
    result = await provider.create_event(...)
except ProviderError as e:
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏
    await queue.add_pending_operation(
        user_id, 'create_event', args
    )
    # –£–≤–µ–¥–æ–º–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    return "–°–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ –ø–æ–∑–∂–µ (–ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)"
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è:
```bash
# Health check –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
*/5 * * * * python scripts/health_check.py
```
```

### Error Handler (src/core/error_handler.py)

```python
import logging
import traceback
from telegram import Update
from telegram.ext import ContextTypes

logger = logging.getLogger(__name__)


async def error_handler(update: object, context: ContextTypes.DEFAULT_TYPE):
    """–ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫"""

    # –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
    logger.error("Exception while handling an update:", exc_info=context.error)

    # –ü–æ–ª—É—á–∞–µ–º traceback
    tb_list = traceback.format_exception(
        None, context.error, context.error.__traceback__
    )
    tb_string = ''.join(tb_list)

    # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if isinstance(update, Update) and update.effective_message:
        await update.effective_message.reply_text(
            "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.\n"
            "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
        )

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
    admin_id = context.bot_data.get('admin_id')
    if admin_id:
        error_message = (
            f"üö® ERROR REPORT\n\n"
            f"Error: {context.error}\n\n"
            f"Traceback (last 500 chars):\n{tb_string[-500:]}"
        )

        try:
            await context.bot.send_message(
                chat_id=admin_id,
                text=error_message[:4000]  # Telegram limit
            )
        except Exception as e:
            logger.error(f"Failed to send error report to admin: {e}")


def setup_error_handlers(application):
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ—à–∏–±–æ–∫"""
    application.add_error_handler(error_handler)
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```markdown
## –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

### Unit Tests (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –ø–æ–∫—Ä—ã—Ç —Ç–µ—Å—Ç–∞–º–∏
- Coverage –º–∏–Ω–∏–º—É–º 60%
- Mocking –≤–Ω–µ—à–Ω–∏—Ö API (–Ω–µ —Ç—Ä–∞—Ç–∏–º –¥–µ–Ω—å–≥–∏)

### Integration Tests:
- –¢–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π SQLite (in-memory)
- –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å mock –¥–∞–Ω–Ω—ã–º–∏

### Manual Testing Checklist:
- [ ] –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] /start —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã –æ—Ç–≤–µ—á–∞—é—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ Excel —Ñ–∞–π–ª–∞
- [ ] Error handling (–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É)
```

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–æ–≤ (tests/test_memory.py)

```python
import pytest
from src.memory.manager import MemoryManager


@pytest.mark.asyncio
async def test_memory_manager_concurrent_access():
    """–¢–µ—Å—Ç –Ω–∞ race conditions –ø—Ä–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ"""
    manager = MemoryManager()
    user_id = 12345

    async def add_message(msg_num):
        async with manager.lock(user_id):
            await manager.add_conversation(
                user_id,
                f"User message {msg_num}",
                f"Assistant message {msg_num}"
            )

    # –ó–∞–ø—É—Å–∫–∞–µ–º 10 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
    import asyncio
    tasks = [add_message(i) for i in range(10)]
    await asyncio.gather(*tasks)

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å
    async with manager.lock(user_id):
        memory = await manager.get_memory(user_id)

    assert len(memory['conversations']) == 10


@pytest.mark.asyncio
async def test_memory_encryption():
    """–¢–µ—Å—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö"""
    manager = MemoryManager()
    user_id = 12345
    sensitive_message = "My credit card is 1234-5678-9012-3456"

    async with manager.lock(user_id):
        await manager.add_conversation(
            user_id,
            sensitive_message,
            "Understood"
        )

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤ –ë–î –¥–∞–Ω–Ω—ã–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã
        from src.database.connection import get_session
        from src.database.models import Conversation

        async with get_session() as session:
            conv = await session.execute(
                select(Conversation).where(Conversation.user_id == user_id)
            )
            raw_conv = conv.scalar_one()

            # –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ù–ï –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã
            assert "1234-5678" not in str(raw_conv.user_message)
```

### Mock –¥–∞–Ω–Ω—ã–µ –¥–ª—è OpenAI (tests/mocks/openai_responses.json)

```json
{
  "generic_response": {
    "choices": [
      {
        "message": {
          "content": "–Ø –º–æ–≥—É –ø–æ–º–æ—á—å –≤–∞–º —Å —ç—Ç–∏–º!"
        }
      }
    ],
    "usage": {
      "prompt_tokens": 50,
      "completion_tokens": 20,
      "total_tokens": 70
    }
  },
  "calendar_create": {
    "choices": [
      {
        "message": {
          "content": "–°–æ–±—ã—Ç–∏–µ '–í—Å—Ç—Ä–µ—á–∞' —Å–æ–∑–¥–∞–Ω–æ –Ω–∞ 15:00 –∑–∞–≤—Ç—Ä–∞."
        }
      }
    ],
    "usage": {
      "prompt_tokens": 100,
      "completion_tokens": 30,
      "total_tokens": 130
    }
  }
}
```

## –û—Ü–µ–Ω–∫–∞ –∑–∞—Ç—Ä–∞—Ç (–†–ï–ê–õ–ò–°–¢–ò–ß–ù–ê–Ø - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (5-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, ~50 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å):

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–µ—Ç–∞–ª–∏ | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å |
|-----------|--------|---------------|
| **OpenAI API** | | |
| - gpt-4o-mini | ~1500 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–µ—Å | $10-15 |
| - Embeddings | Minimal usage | $1-2 |
| - Whisper (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω) | ~100 –º–∏–Ω—É—Ç –∞—É–¥–∏–æ | $6-10 |
| **Anthropic Claude** (fallback) | ~10% –∑–∞–ø—Ä–æ—Å–æ–≤ | $2-5 |
| **–°–µ—Ä–≤–µ—Ä** | | |
| - VPS (1 vCPU, 2GB) | DigitalOcean/Hetzner | $6-12 |
| - –ò–õ–ò –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ | $0 |
| **Domain + SSL** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | –î–ª—è webhook | $10-15/–≥–æ–¥ ($1/–º–µ—Å) |
| **Backup Storage** | Backblaze B2 (10GB) | $0.50 |
| **–ò–¢–û–ì–û (—Å VPS):** | | **$25-45/–º–µ—Å** |
| **–ò–¢–û–ì–û (–ª–æ–∫–∞–ª—å–Ω–æ):** | | **$13-32/–º–µ—Å** |

### –°–∫—Ä—ã—Ç—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (—á–∞—Å—Ç–æ –∑–∞–±—ã–≤–∞—é—Ç):

| –ß—Ç–æ | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-----|-----------|
| GPT-4 Vision (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ) | $0.01 –∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–¥–æ—Ä–æ–≥–æ!) |
| –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ OpenAI | +20-50% –æ—Ç –±–∞–∑–æ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ |
| Bandwidth (—Ñ–∞–π–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) | ~$2-5/–º–µ—Å |
| Time spent on development | –í–∞—à–µ –≤—Ä–µ–º—è :) |

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç–∫–æ–Ω–æ–º–∏–∏:

```markdown
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ gpt-4o-mini** (–≤ 50 —Ä–∞–∑ –¥–µ—à–µ–≤–ª–µ gpt-4)
2. **–ö—ç—à–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã** (—ç–∫–æ–Ω–æ–º–∏—è ~20%)
3. **–õ–∏–º–∏—Ç–∏—Ä—É–π—Ç–µ –¥–ª–∏–Ω—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** (max 50 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
4. **–û—Ç–∫–ª—é—á–∏—Ç–µ –¥–æ—Ä–æ–≥–∏–µ —Ñ–∏—á–∏ –¥–ª—è —Ç–µ—Å—Ç–∞:**
   - ENABLE_VOICE_MESSAGES=false (Whisper –¥–æ—Ä–æ–≥–æ–π)
   - ENABLE_IMAGE_ANALYSIS=false (GPT-4V –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ–π)
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Batch API** –¥–ª—è –Ω–µ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á (50% —Å–∫–∏–¥–∫–∞)
6. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∂–µ—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç** –≤ OpenAI dashboard ($30-50/–º–µ—Å)
7. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞—Å—Ö–æ–¥—ã** –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
```

### –†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ä–∞—Å—Ö–æ–¥–æ–≤ (–º–æ–π –æ–ø—ã—Ç):

```markdown
## –ú–µ—Å—è—Ü 1 (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):
- OpenAI: $8.50
- Hetzner VPS: $4.50
- –ò–¢–û–ì–û: $13

## –ú–µ—Å—è—Ü 2 (5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):
- OpenAI: $28 (–≤–∫–ª—é—á–∞–ª GPT-4V, –¥–æ—Ä–æ–≥–æ!)
- Anthropic: $3
- VPS: $4.50
- –ò–¢–û–ì–û: $35.50

## –ú–µ—Å—è—Ü 3 (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è):
- OpenAI: $12 (–æ—Ç–∫–ª—é—á–∏–ª Vision, —Ç–æ–ª—å–∫–æ mini)
- Anthropic: $2
- VPS: $4.50
- –ò–¢–û–ì–û: $18.50
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ!)

### Security Checklist (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è MVP):

```markdown
## Data Security:

- [x] –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ sensitive –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î (AES-256)
- [x] –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ SQLite —Ñ–∞–π–ª–∞
- [x] –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ encryption key (–æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç .env)
- [x] .env —Ñ–∞–π–ª –≤ .gitignore
- [x] –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã

## Input Validation:

- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [x] –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (—É–¥–∞–ª–µ–Ω–∏–µ –æ–ø–∞—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤)
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ (whitelist)
- [x] Protection –æ—Ç path traversal
- [x] –õ–∏–º–∏—Ç—ã –Ω–∞ –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏–π

## Rate Limiting:

- [x] Per-user rate limiting (30 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω—É—Ç—É)
- [x] Global rate limiting
- [x] Protection –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–ø–∞–ª–∏—Ç—å –≤–µ—Å—å –±—é–¥–∂–µ—Ç

## API Keys Safety:

- [x] –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–µ –∫–ª—é—á–∏
- [x] –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö (sk-...abc ‚Üí sk-...*****)
- [x] –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è dev/prod
- [x] –†–æ—Ç–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π (–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ –±–æ—Ç–µ)
- [x] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–æ–±—ã—á–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## Access Control:

- [x] Whitelist —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [x] Admin-—Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥—ã
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- [x] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## GDPR Compliance (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å):

- [x] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ (/export)
- [x] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ (/delete)
- [x] –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω–∏–º
- [x] –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
```

### –ü—Ä–∏–º–µ—Ä —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (src/database/encryption.py)

```python
import os
import base64
from cryptography.fernet import Fernet
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2


def get_encryption_key() -> bytes:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è"""
    key_string = os.getenv('ENCRYPTION_KEY')

    if not key_string:
        raise ValueError("ENCRYPTION_KEY not set in environment")

    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–ª—é—á –∏–∑ —Å—Ç—Ä–æ–∫–∏
    kdf = PBKDF2(
        algorithm=hashes.SHA256(),
        length=32,
        salt=b'ai-assistant-salt',  # –í production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å random salt
        iterations=100000,
    )

    key = base64.urlsafe_b64encode(kdf.derive(key_string.encode()))
    return key


_fernet = None

def get_fernet() -> Fernet:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ Fernet –∏–Ω—Å—Ç–∞–Ω—Å–∞ (singleton)"""
    global _fernet
    if _fernet is None:
        _fernet = Fernet(get_encryption_key())
    return _fernet


def encrypt_data(data: str) -> bytes:
    """–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏"""
    return get_fernet().encrypt(data.encode())


def decrypt_data(encrypted: bytes) -> str:
    """–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö"""
    return get_fernet().decrypt(encrypted).decode()
```

## Data Management & Migrations

### Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π backup (–¥–æ–±–∞–≤–∏—Ç—å –≤ crontab)
0 */6 * * * /path/to/scripts/backup.sh

# backup.sh
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/path/to/backups"

# Backup SQLite database
cp data/database.db "$BACKUP_DIR/database_$DATE.db"

# Backup user files
tar -czf "$BACKUP_DIR/user_files_$DATE.tar.gz" data/user_files/

# –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤ (>30 –¥–Ω–µ–π)
find "$BACKUP_DIR" -name "*.db" -mtime +30 -delete
find "$BACKUP_DIR" -name "*.tar.gz" -mtime +30 -delete

echo "Backup completed: $DATE"
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
cp /path/to/backups/database_20250115_120000.db data/database.db
tar -xzf /path/to/backups/user_files_20250115_120000.tar.gz -C data/
```

### –ú–∏–≥—Ä–∞—Ü–∏—è: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è ‚Üí –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è

```python
# scripts/migrate_to_pro.py
"""
–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é
"""
import asyncio
import sqlite3
from sqlalchemy import create_engine

async def migrate():
    # 1. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ SQLite
    print("Exporting data from SQLite...")
    conn = sqlite3.connect('data/database.db')
    cursor = conn.cursor()

    users = cursor.execute("SELECT * FROM users").fetchall()
    conversations = cursor.execute("SELECT * FROM conversations").fetchall()

    # 2. –ò–º–ø–æ—Ä—Ç –≤ PostgreSQL
    print("Importing to PostgreSQL...")
    pg_engine = create_engine(os.getenv('DATABASE_URL'))
    # ... –∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

    # 3. –ú–∏–≥—Ä–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ –≤ Qdrant
    print("Migrating memory to Qdrant...")
    # ... –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∞

    print("Migration completed!")

if __name__ == '__main__':
    asyncio.run(migrate())
```

## Performance & Limits

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```markdown
## Bottlenecks:

1. **OpenAI API** - 2-10 —Å–µ–∫—É–Ω–¥
   - Solution: typing indicator –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
   - Solution: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∑–∞–ø—Ä–æ—Å..."

2. **CalDAV** - 1-5 —Å–µ–∫—É–Ω–¥
   - Solution: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –Ω–∞ 5 –º–∏–Ω—É—Ç
   - Solution: —Ñ–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

3. **Excel –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –º–µ–¥–ª–µ–Ω–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
   - Solution: async processing
   - Solution: progress bar –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

4. **SQLite** - —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω—ã–º –ø—Ä–∏ >100K –∑–∞–ø–∏—Å–µ–π
   - Solution: —Ä–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - Solution: –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL –ø—Ä–∏ —Ä–æ—Å—Ç–µ

## –õ–∏–º–∏—Ç—ã (–∂–µ—Å—Ç–∫–∏–µ):

- –ú–∞–∫—Å–∏–º—É–º 10MB –¥–ª—è Excel —Ñ–∞–π–ª–æ–≤
- –ú–∞–∫—Å–∏–º—É–º 5MB –¥–ª—è PDF
- –ú–∞–∫—Å–∏–º—É–º 20MB –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ú–∞–∫—Å–∏–º—É–º 4000 —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
- –ú–∞–∫—Å–∏–º—É–º 100 —Å–æ–±—ã—Ç–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∑–∞ –∑–∞–ø—Ä–æ—Å
- –ú–∞–∫—Å–∏–º—É–º 50 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∏—Å—Ç–æ—Ä–∏–∏
- Timeout 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –ª—é–±—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
- –ú–∞–∫—Å–∏–º—É–º 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

```python
# –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
@lru_cache(maxsize=100)
def get_frequent_data(query):
    pass

# Lazy loading –¥–ª—è –º–æ–¥—É–ª–µ–π
def get_excel_handler():
    global _excel_handler
    if _excel_handler is None:
        from modules import ExcelHandler
        _excel_handler = ExcelHandler()
    return _excel_handler

# Connection pooling
engine = create_engine(
    DATABASE_URL,
    pool_size=5,
    max_overflow=10,
    pool_pre_ping=True
)
```
```

## User Experience (UX)

### Onboarding Flow:

```markdown
## –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (/start):

1. **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ:**
   "üëã –ü—Ä–∏–≤–µ—Ç, {–∏–º—è}! –Ø –≤–∞—à –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç."

2. **–í—ã–±–æ—Ä —è–∑—ã–∫–∞:**
   [–†—É—Å—Å–∫–∏–π üá∑üá∫] [English üá∫üá∏]

3. **–ö—Ä–∞—Ç–∫–∏–π —Ç—É—Ç–æ—Ä–∏–∞–ª (3 —Å–æ–æ–±—â–µ–Ω–∏—è):**
   Msg 1: "–Ø –º–æ–≥—É –ø–æ–º–æ–≥–∞—Ç—å —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º, –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ Excel —Ñ–∞–π–ª–∞–º–∏"
   Msg 2: "–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ"
   Msg 3: "–ù–∞–ø—Ä–∏–º–µ—Ä: '–°–æ–∑–¥–∞–π –≤—Å—Ç—Ä–µ—á—É –∑–∞–≤—Ç—Ä–∞ –≤ 15:00'"

4. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
   "–•–æ—Ç–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å?"
   [–î–∞, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å] [–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å]

5. **–ì–æ—Ç–æ–≤–æ:**
   "–û—Ç–ª–∏—á–Ω–æ! –ú–æ–∂–µ–º –Ω–∞—á–∏–Ω–∞—Ç—å. –ù–∞–ø–∏—à–∏—Ç–µ /help –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏."

## In-app –ø–æ–º–æ—â—å:

/help ‚Üí
```
üìö –ü–æ–º–æ—â—å

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
/start - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã
/help - –≠—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞
/settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏
/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ß—Ç–æ —è —É–º–µ—é:**
üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å - "–°–æ–∑–¥–∞–π –≤—Å—Ç—Ä–µ—á—É –∑–∞–≤—Ç—Ä–∞ –≤ 10:00"
üë• –ö–æ–Ω—Ç–∞–∫—Ç—ã - "–ù–∞–π–¥–∏ –∫–æ–Ω—Ç–∞–∫—Ç –ò–≤–∞–Ω"
üìä Excel - –û—Ç–ø—Ä–∞–≤—å —Ñ–∞–π–ª –∏ —Å–ø—Ä–æ—Å–∏ "–ü–æ—Å—á–∏—Ç–∞–π —Å—É–º–º—É"
üíæ –ü–∞–º—è—Ç—å - "–ó–∞–ø–æ–º–Ω–∏ —á—Ç–æ —è –ª—é–±–ª—é –∫–æ—Ñ–µ"

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
- –°–æ–∑–¥–∞–π —Å–æ–±—ã—Ç–∏–µ "–í—Å—Ç—Ä–µ—á–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º" –Ω–∞ –∑–∞–≤—Ç—Ä–∞ 15:00
- –ü–æ–∫–∞–∂–∏ –º–æ–∏ –≤—Å—Ç—Ä–µ—á–∏ –Ω–∞ —ç—Ç—É –Ω–µ–¥–µ–ª—é
- –î–æ–±–∞–≤—å –∫–æ–Ω—Ç–∞–∫—Ç: –ú–∞—Ä–∏—è, +7 999 123-4567
- –ö–æ–≥–¥–∞ —É –º–µ–Ω—è —Å–ª–µ–¥—É—é—â–∞—è —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–∞—Ä–∞ —á–∞—Å–æ–≤?

–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å? –ù–∞–ø–∏—à–∏—Ç–µ @admin_username
```

## Feedback –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:

```python
# –ü—Ä–∏–º–µ—Ä
async def process_large_excel(file, update):
    await update.message.reply_text("üìä –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Ñ–∞–π–ª...")

    # –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    progress_msg = await update.message.reply_text("–ü—Ä–æ–≥—Ä–µ—Å—Å: 0%")

    for i in range(0, 101, 20):
        await asyncio.sleep(1)
        await progress_msg.edit_text(f"–ü—Ä–æ–≥—Ä–µ—Å—Å: {i}%")

    await progress_msg.edit_text("‚úÖ –ì–æ—Ç–æ–≤–æ!")
```

## –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –æ–ø–∞—Å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π:

```python
# –ü—Ä–∏–º–µ—Ä –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
from telegram import InlineKeyboardButton, InlineKeyboardMarkup

async def confirm_delete_all(update, context):
    keyboard = [
        [
            InlineKeyboardButton("‚úÖ –î–∞, —É–¥–∞–ª–∏—Ç—å", callback_data='confirm_delete'),
            InlineKeyboardButton("‚ùå –û—Ç–º–µ–Ω–∞", callback_data='cancel_delete')
        ]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    await update.message.reply_text(
        "‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã? –ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ 47 —Å–æ–±—ã—Ç–∏–π.\n"
        "–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!",
        reply_markup=reply_markup
    )
```

## –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏:

```markdown
"üìä –í—ã —á–∞—Å—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å Excel –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º.
 –•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –Ω–∞–ø–æ–º–∏–Ω–∞–ª –æ–± —ç—Ç–æ–º?"
 [–î–∞, –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å] [–ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ]

"üìÖ –£ –≤–∞—Å 3 –≤—Å—Ç—Ä–µ—á–∏ –∑–∞–≤—Ç—Ä–∞. –ù–∞–ø–æ–º–Ω–∏—Ç—å –∑–∞ —á–∞—Å –¥–æ –∫–∞–∂–¥–æ–π?"
[–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è]

"üí° –°–æ–≤–µ—Ç: –í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–Ω–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è)"
```
```

## –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (i18n)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–∫–∞–ª–µ–π (locales/ru.json):

```json
{
  "welcome_message": "üëã –ü—Ä–∏–≤–µ—Ç, {name}! –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.\n\n–Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Å:\nüìÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º\nüë• –ö–æ–Ω—Ç–∞–∫—Ç–∞–º–∏\nüìä Excel —Ñ–∞–π–ª–∞–º–∏\nüß† –ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏\n\n–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ —á—Ç–æ-–Ω–∏–±—É–¥—å!",

  "onboarding_step1": "–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏–º –±–æ—Ç–∞.\n\n–®–∞–≥ 1/3: –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞",
  "onboarding_step2": "–®–∞–≥ 2/3: –•–æ—Ç–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å?",
  "onboarding_step3": "–®–∞–≥ 3/3: –í—Å—ë –≥–æ—Ç–æ–≤–æ! üéâ",

  "error_generic": "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
  "error_file_too_large": "‚ùå –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º—É–º {max_size} MB.",
  "error_rate_limit": "‚è± –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–¥–æ–∂–¥–∏—Ç–µ {seconds} —Å–µ–∫—É–Ω–¥.",

  "calendar_event_created": "‚úÖ –°–æ–±—ã—Ç–∏–µ '{title}' —Å–æ–∑–¥–∞–Ω–æ –Ω–∞ {date} –≤ {time}",
  "calendar_no_events": "üìÖ –£ –≤–∞—Å –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π –Ω–∞ —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥",

  "contact_added": "‚úÖ –ö–æ–Ω—Ç–∞–∫—Ç {name} –¥–æ–±–∞–≤–ª–µ–Ω",
  "contact_not_found": "‚ùå –ö–æ–Ω—Ç–∞–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω",

  "memory_saved": "üß† –ó–∞–ø–æ–º–Ω–∏–ª!",

  "help_command": "üìö –ü–æ–º–æ—â—å\n\n...",

  "stats_title": "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è",
  "stats_messages": "–°–æ–æ–±—â–µ–Ω–∏–π: {count}",
  "stats_cost": "–ü–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ API: ${amount}",

  "gdpr_export": "üì¶ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ...",
  "gdpr_delete_confirm": "‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è!",
  "gdpr_delete_done": "‚úÖ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã"
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (src/utils/i18n.py):

```python
import json
import os
from typing import Dict

_translations: Dict[str, Dict] = {}

def load_translations():
    """–ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤"""
    locales_dir = 'locales'

    for filename in os.listdir(locales_dir):
        if filename.endswith('.json'):
            lang = filename[:-5]  # remove .json
            with open(f'{locales_dir}/{filename}', 'r', encoding='utf-8') as f:
                _translations[lang] = json.load(f)

def get_translator(language_code: str):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –¥–ª—è —è–∑—ã–∫–∞"""
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —è–∑—ã–∫ (ru, en)
    lang = 'ru' if language_code and language_code.startswith('ru') else 'en'

    def translate(key: str, **kwargs) -> str:
        """–ü–µ—Ä–µ–≤–æ–¥ –∫–ª—é—á–∞ —Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤"""
        text = _translations.get(lang, _translations['en']).get(key, key)
        return text.format(**kwargs) if kwargs else text

    return translate

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
load_translations()
```

## Risks & Mitigation

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏:

```markdown
| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | Mitigation |
|------|-------------|---------|------------|
| **OpenAI API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | Fallback –Ω–∞ Claude, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞ OpenAI** | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –ñ–µ—Å—Ç–∫–∏–µ –ª–∏–º–∏—Ç—ã, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| **Apple –∏–∑–º–µ–Ω–∏—Ç CalDAV** | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | Multi-provider support |
| **–£—Ç–µ—á–∫–∞ API –∫–ª—é—á–µ–π** | –ù–∏–∑–∫–∞—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ | –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, —Ä–æ—Ç–∞—Ü–∏—è, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| **SQLite –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è** | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–±—å—é—Ç —Å–∏—Å—Ç–µ–º—É –∑–∞–ø—Ä–æ—Å–∞–º–∏** | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | Rate limiting, –æ—á–µ—Ä–µ–¥–∏ |
| **–ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö** | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–æ–µ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã |
| **GDPR –Ω–∞—Ä—É—à–µ–Ω–∏—è** | –ù–∏–∑–∫–∞—è | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ | Export/delete —Ñ—É–Ω–∫—Ü–∏–∏, —Å–æ–≥–ª–∞—Å–∏–µ |

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏:

### Race Conditions:
**–†–∏—Å–∫:** –î–≤–∞ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Üí –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö
**Mitigation:** asyncio.Lock –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Memory Leaks:
**–†–∏—Å–∫:** –ë–æ—Ç –ø–∞–¥–∞–µ—Ç —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π
**Mitigation:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π restart

### Context Window Overflow:
**–†–∏—Å–∫:** –î–ª–∏–Ω–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä ‚Üí –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤
**Mitigation:** –õ–∏–º–∏—Ç –Ω–∞ 50 —Å–æ–æ–±—â–µ–Ω–∏–π, –∞–≤—Ç–æ—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è

### Provider API Changes:
**–†–∏—Å–∫:** –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∏–∑–º–µ–Ω–∏–ª API ‚Üí –∫–æ–¥ –ª–æ–º–∞–µ—Ç—Å—è
**Mitigation:** –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, fallback

## –ë–∏–∑–Ω–µ—Å —Ä–∏—Å–∫–∏:

### OpenAI Policy Changes:
**–†–∏—Å–∫:** OpenAI –∑–∞–ø—Ä–µ—Ç–∏—Ç –≤–∞—à use case
**Mitigation:** Fallback LLM –≥–æ—Ç–æ–≤ (Claude, Llama)

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
**–†–∏—Å–∫:** 1000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí –≤—Å—ë –º–µ–¥–ª–µ–Ω–Ω–æ
**Mitigation:** –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Pro –≤–µ—Ä—Å–∏—é

### Legal Issues:
**–†–∏—Å–∫:** GDPR —à—Ç—Ä–∞—Ñ, —Å—É–¥–µ–±–Ω—ã–µ –∏—Å–∫–∏
**Mitigation:** Compliance —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞
```

## Legal & Compliance (–ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å)

### Terms of Service (–º–∏–Ω–∏–º—É–º):

```markdown
# –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI Assistant

## 1. –ü—Ä–∏–Ω—è—Ç–∏–µ —É—Å–ª–æ–≤–∏–π
–ò—Å–ø–æ–ª—å–∑—É—è –±–æ—Ç–∞, –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ —ç—Ç–∏ —É—Å–ª–æ–≤–∏—è.

## 2. –û–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
AI Assistant - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏.

## 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
- –í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å—Ç–∞—Ä—à–µ 18 –ª–µ—Ç (–∏–ª–∏ 13+ —Å —Å–æ–≥–ª–∞—Å–∏—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π)
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Å–ø–∞–º–∏—Ç—å –∏–ª–∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —Å–µ—Ä–≤–∏—Å–æ–º
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –Ω–∞—Ä—É—à–µ–Ω–∏—è

## 4. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å
–°–º. Privacy Policy

## 5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è "–∫–∞–∫ –µ—Å—Ç—å". –ú—ã –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º –±–µ—Å–ø–µ—Ä–µ–±–æ–π–Ω—É—é —Ä–∞–±–æ—Ç—É.

## 6. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π
–ú—ã –º–æ–∂–µ–º –∏–∑–º–µ–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.

–î–∞—Ç–∞: –î–µ–∫–∞–±—Ä—å 2025
```

### Privacy Policy (–º–∏–Ω–∏–º—É–º):

```markdown
# –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏

## –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –º—ã —Å–æ–±–∏—Ä–∞–µ–º:
- –í–∞—à Telegram ID
- –°–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –±–æ—Ç—É
- –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –∑–∞–≥—Ä—É–∂–∞–µ—Ç–µ
- –°–æ–±—ã—Ç–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–∏–ª–∏)
- –ö–æ–Ω—Ç–∞–∫—Ç—ã (–µ—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–∏–ª–∏)

## –ö–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ:
- –î–ª—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
- –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenAI API (–æ–Ω–∏ —Ç–æ–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ)

## –° –∫–µ–º –º—ã –¥–µ–ª–∏–º—Å—è –¥–∞–Ω–Ω—ã–º–∏:
- OpenAI (–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π)
- Anthropic (fallback LLM)
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∫–∞–ª–µ–Ω–¥–∞—Ä—è (Apple/Google/Microsoft)

## –í–∞—à–∏ –ø—Ä–∞–≤–∞ (GDPR):
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö: /export
- –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: /delete
- –û—Ç–∑—ã–≤ —Å–æ–≥–ª–∞—Å–∏—è: —É–¥–∞–ª–∏—Ç–µ –±–æ—Ç–∞

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –î–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## –ö–æ–Ω—Ç–∞–∫—Ç—ã:
Email: your@email.com
Telegram: @yourusername

–î–∞—Ç–∞: –î–µ–∫–∞–±—Ä—å 2025
```

### –°–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö:

```python
# –ü—Ä–∏ –ø–µ—Ä–≤–æ–º /start
async def cmd_start(update, context):
    user_id = update.effective_user.id

    if not await user_accepted_terms(user_id):
        await show_terms_agreement(update, context)
        return

    # ... –æ–±—ã—á–Ω–∞—è –ª–æ–≥–∏–∫–∞

async def show_terms_agreement(update, context):
    keyboard = [
        [InlineKeyboardButton("‚úÖ –ü—Ä–∏–Ω–∏–º–∞—é", callback_data='accept_terms')],
        [InlineKeyboardButton("üìÑ –ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é", url='https://yoursite.com/terms')]
    ]

    await update.message.reply_text(
        "–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–Ω—è—Ç—å:\n"
        "- –£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\n"
        "- –ü–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏\n\n"
        "–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è OpenAI API.",
        reply_markup=InlineKeyboardMarkup(keyboard)
    )
```

## FAQ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

```markdown
## Q: –ü–æ—á–µ–º—É —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ MVP?
A: –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –í –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

## Q: –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ OpenAI API?
A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ mock —Ä–µ–∂–∏–º —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ (tests/mocks/openai_responses.json)

## Q: –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–π–º–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ MVP —Ä–µ–∞–ª—å–Ω–æ?
A: –î–ª—è –æ–¥–Ω–æ–≥–æ –æ–ø—ã—Ç–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞: **4-6 –Ω–µ–¥–µ–ª—å –ø–æ–ª–Ω–æ–π –∑–∞–Ω—è—Ç–æ—Å—Ç–∏**.
   –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ: **8-12 –Ω–µ–¥–µ–ª—å**.
   –ü–æ –≤—ã—Ö–æ–¥–Ω—ã–º: **3-6 –º–µ—Å—è—Ü–µ–≤**.

## Q: –ú–æ–≥—É –ª–∏ —è –º–æ–Ω–µ—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ–≥–æ –±–æ—Ç–∞?
A: –î–∞, –Ω–æ –Ω—É–∂–Ω–æ:
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ –±–∏–∑–Ω–µ—Å
   - –î–æ–±–∞–≤–∏—Ç—å Terms of Service –∏ Privacy Policy
   - –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (Stripe/PayPal)
   - Billing and usage tracking
   - –ù–∞–ª–æ–≥–∏!

## Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ OpenAI –∑–∞–±–∞–Ω–∏–ª –∞–∫–∫–∞—É–Ω—Ç?
A: Fallback –Ω–∞ Anthropic Claude —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
   - Google Gemini
   - Llama 3.1 (self-hosted)
   - Mistral AI

## Q: –ù—É–∂–Ω–æ –ª–∏ –º–Ω–µ –∑–Ω–∞—Ç—å DevOps –¥–ª—è MVP?
A: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ:
   - –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å Python —Å–∫—Ä–∏–ø—Ç
   - –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª
   - –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã Linux (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ VPS)

   –î–ª—è production - –¥–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω—ã DevOps –Ω–∞–≤—ã–∫–∏ –∏–ª–∏ DevOps –∏–Ω–∂–µ–Ω–µ—Ä.

## Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?
A: –î–≤–∞ —Å–ø–æ—Å–æ–±–∞:
   1. –î–æ–±–∞–≤–∏—Ç—å Telegram ID –≤ .env ‚Üí ALLOWED_USER_IDS
   2. Admin –∫–æ–º–∞–Ω–¥–∞: /add_user <telegram_id>

## Q: –ë–æ—Ç –ø–∞–¥–∞–µ—Ç —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤. –ü–æ—á–µ–º—É?
A: –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
   - Memory leak (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å –ø–æ–º–æ—â—å—é memory_profiler)
   - –ù–µ–∑–∞–∫—Ä—ã—Ç—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –ë–î
   - –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ rotation)
   - Rate limit –æ—Ç Telegram API

   Solution: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏ + –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π restart

## Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ Telegram?
A: –î–∞! –ó–∞–º–µ–Ω–∏—Ç–µ telegram.ext –Ω–∞:
   - Discord bot (discord.py)
   - Slack bot (slack-bolt)
   - Web API (FastAPI)
   - CLI interface

## Q: –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å backup –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º?
A: ```bash
   ./scripts/backup.sh
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backup —Å–æ–∑–¥–∞–ª—Å—è
   ls -lh /path/to/backups/
   ```

## Q: SQLite vs PostgreSQL - –∫–æ–≥–¥–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å?
A: –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ –∫–æ–≥–¥–∞:
   - >50 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - >100,000 –∑–∞–ø–∏—Å–µ–π –≤ –ë–î
   - –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ "database is locked"
   - –ù—É–∂–Ω–∞ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞?
A: 1. –°–æ–∑–¥–∞–π—Ç–µ locales/de.json (–¥–ª—è –Ω–µ–º–µ—Ü–∫–æ–≥–æ)
   2. –ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –≤—Å–µ –∫–ª—é—á–∏ –∏–∑ locales/en.json
   3. –í—Å—ë! i18n —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## Q: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç. –ö–∞–∫ –¥–µ–±–∞–∂–∏—Ç—å?
A: Checklist:
   1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: tail -f data/logs/bot.log
   2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω: ps aux | grep bot.py
   3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health check: python scripts/health_check.py
   4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª (–≤—Å–µ –∫–ª—é—á–∏ –Ω–∞ –º–µ—Å—Ç–µ?)
   5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å OpenAI API

## Q: –ö–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ OpenAI?
A: 1. –í OpenAI dashboard ‚Üí Usage limits ‚Üí Set monthly limit
   2. –í –±–æ—Ç–µ: OPENAI_BUDGET_MONTHLY=50.00
   3. –í–∫–ª—é—á–∏—Ç–µ –∞–ª–µ—Ä—Ç—ã: SEND_BUDGET_ALERTS=true
   4. –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ mini –º–æ–¥–µ–ª—å –ø—Ä–∏ 70% –±—é–¥–∂–µ—Ç–∞

## Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å self-hosted LLM?
A: –î–∞! –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π provider:
   ```python
   # src/llm/ollama_client.py
   class OllamaClient(BaseLLMProvider):
       async def chat(self, messages):
           # Ollama API call
           pass
   ```
   –ú–æ–¥–µ–ª–∏: Llama 3.1, Mistral, Phi-3

## Q: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç multi-provider –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π?
A: –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å CalendarProvider ‚Üí –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Apple, Google, Local).
   Factory pattern –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–π –Ω–∞ –æ—Å–Ω–æ–≤–µ CALENDAR_PROVIDER –≤ .env

## Q: –î–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã?
A: –î–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Fernet (—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ AES-128).
   –ö–ª—é—á –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ ENCRYPTION_KEY –≤ .env.
   –í –ë–î —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

## Q: –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏?
A: –í MVP –Ω–µ–ª—å–∑—è (downtime –Ω–µ–∏–∑–±–µ–∂–µ–Ω).
   –í –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏: blue-green deployment –∏–ª–∏ rolling update.

## Q: Telegram –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞ –∑–∞ —Å–ø–∞–º. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?
A: - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ >20 —Å–æ–æ–±—â–µ–Ω–∏–π/–º–∏–Ω –≤ –≥—Ä—É–ø–ø—ã
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ broadcast –±–µ–∑ Paid Broadcasts
   - –ù–∞–ø–∏—à–∏—Ç–µ –≤ @BotSupport –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

```markdown
## –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP:

1. **–û–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è/–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤**
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ Apple –ò–õ–ò Google –ò–õ–ò Local
   - Multi-provider —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏

2. **SQLite –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ >100K –∑–∞–ø–∏—Å–µ–π
   - "Database locked" –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
   - Solution: –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL

3. **–ù–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–Ω—Å—Ç–∞–Ω—Å –±–æ—Ç–∞
   - –ú–∞–∫—Å–∏–º—É–º ~50 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å**
   - –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ù–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
   - Solution: –¥–æ–±–∞–≤–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î

5. **–ë–∞–∑–æ–≤—ã–π error recovery**
   - –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ retry –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   - –û–ø–µ—Ä–∞—Ü–∏–∏ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é

6. **–ù–µ—Ç webhooks**
   - –¢–æ–ª—å–∫–æ polling (–º–µ–Ω–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ)
   - Webhook —Ç—Ä–µ–±—É–µ—Ç –¥–æ–º–µ–Ω + SSL

7. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –ª–æ–≥–∏
   - –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏ –¥–∞—à–±–æ—Ä–¥–æ–≤

8. **–û–¥–∏–Ω —è–∑—ã–∫ LLM**
   - –†—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Ç–æ–ª—å–∫–æ
   - –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –±–∞–≥–∏:

### Bug #1: Race condition –ø—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 2+ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥—Ä—è–¥ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ,
             –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ—Ç–µ—Ä—è –æ–¥–Ω–æ–≥–æ –∏–∑ –æ—Ç–≤–µ—Ç–æ–≤.
**Workaround:** asyncio.Lock —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –Ω–æ edge cases –≤–æ–∑–º–æ–∂–Ω—ã
**Fix:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (–æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π)

### Bug #2: CalDAV timeout –ø—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
**–û–ø–∏—Å–∞–Ω–∏–µ:** CalDAV –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å >10 —Å–µ–∫—É–Ω–¥
**Workaround:** –£–≤–µ–ª–∏—á–∏—Ç—å timeout –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
**Fix:** –î–æ–±–∞–≤–∏—Ç—å async retry —Å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º

### Bug #3: Excel —Ñ–∞–π–ª—ã —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ Excel —Ñ–∞–π–ª—ã —Å –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ —Å—Ç–æ–ª–±—Ü–æ–≤
             –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
**Workaround:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è
**Fix:** –í –ø–ª–∞–Ω–∞—Ö (—É–ª—É—á—à–µ–Ω–∏–µ encoding detection)

## –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:

- ‚ùå –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã (—Ç–æ–ª—å–∫–æ –ª–∏—á–Ω—ã–µ)
- ‚ùå Telegram Mini Apps (–ø–æ–∫–∞)
- ‚ùå Inline mode
- ‚ùå Payments (Telegram Stars)
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–æ—Ç—ã –Ω–∞ –æ–¥–Ω–æ–π –ë–î
- ‚ùå –°–æ–≤–º–µ—Å—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é
- ‚ùå Real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É)
- ‚ùå Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

### Health Check Script (scripts/health_check.py)

```python
#!/usr/bin/env python3
"""
Health check script –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
"""
import sys
import os
import asyncio
from dotenv import load_dotenv

load_dotenv()

async def check_config():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    required_vars = [
        'TELEGRAM_BOT_TOKEN',
        'OPENAI_API_KEY',
        'SECRET_KEY',
        'ENCRYPTION_KEY'
    ]

    for var in required_vars:
        if not os.getenv(var):
            print(f"‚ùå {var} not set in .env")
            return False

    print("‚úÖ Configuration valid")
    return True

async def check_database():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"""
    try:
        from src.database.connection import get_session

        async with get_session() as session:
            await session.execute("SELECT 1")

        print("‚úÖ Database accessible")
        return True
    except Exception as e:
        print(f"‚ùå Database error: {e}")
        return False

async def check_openai():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ OpenAI API"""
    try:
        from src.llm.openai_client import OpenAIClient

        client = OpenAIClient()
        # –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
        response = await client.chat([
            {"role": "user", "content": "test"}
        ])

        print("‚úÖ OpenAI API working")
        return True
    except Exception as e:
        print(f"‚ùå OpenAI API error: {e}")
        return False

async def check_claude():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ Claude API (fallback)"""
    try:
        from src.llm.claude_client import ClaudeClient

        client = ClaudeClient()
        response = await client.chat([
            {"role": "user", "content": "test"}
        ])

        print("‚úÖ Claude API working (fallback)")
        return True
    except Exception as e:
        print(f"‚ö†Ô∏è  Claude API error (fallback): {e}")
        return True  # –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

async def check_telegram():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram bot token"""
    try:
        from telegram import Bot

        bot = Bot(token=os.getenv('TELEGRAM_BOT_TOKEN'))
        me = await bot.get_me()

        print(f"‚úÖ Telegram bot token valid (@{me.username})")
        return True
    except Exception as e:
        print(f"‚ùå Telegram bot error: {e}")
        return False

async def check_provider():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è"""
    try:
        from src.providers.calendar.base import get_calendar_provider

        provider = get_calendar_provider()
        # –ü—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è

        print(f"‚úÖ Calendar provider configured")
        return True
    except Exception as e:
        print(f"‚ö†Ô∏è  Calendar provider warning: {e}")
        return True  # –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–∞–∑–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã

async def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è health check"""
    print("üè• Running health checks...\n")

    checks = [
        check_config(),
        check_database(),
        check_openai(),
        check_claude(),
        check_telegram(),
        check_provider()
    ]

    results = await asyncio.gather(*checks, return_exceptions=True)

    # –ü–æ–¥—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    passed = sum(1 for r in results if r is True)
    failed = sum(1 for r in results if r is False or isinstance(r, Exception))

    print(f"\n{'='*50}")
    print(f"Health Check Results: {passed}/{len(checks)} passed")

    if failed == 0:
        print("‚úÖ All systems operational")
        sys.exit(0)
    else:
        print(f"‚ùå {failed} check(s) failed")
        sys.exit(1)

if __name__ == '__main__':
    asyncio.run(main())
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```bash
# –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
python scripts/health_check.py

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (cron)
*/30 * * * * /path/to/scripts/health_check.py || echo "Bot unhealthy!" | mail -s "Alert" admin@example.com
```

## Roadmap (–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

### –≠—Ç–∞–ø 1: Core MVP (4 –Ω–µ–¥–µ–ª–∏)
- [x] –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
- [x] OpenAI ChatGPT + Claude fallback
- [x] SQLite —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
- [x] –ü—Ä–æ—Å—Ç–∞—è –ø–∞–º—è—Ç—å (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å–æ–æ–±—â–µ–Ω–∏–π)
- [x] Rate limiting
- [x] Error handling
- [x] –û–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è/–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- [x] –ë–∞–∑–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å Excel
- [ ] Unit —Ç–µ—Å—Ç—ã (coverage 60%+)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –≠—Ç–∞–ø 2: Polish & Testing (2 –Ω–µ–¥–µ–ª–∏)
- [ ] Onboarding flow
- [ ] –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (ru, en)
- [ ] GDPR compliance (export, delete)
- [ ] Health check —Å–∫—Ä–∏–ø—Ç
- [ ] Backup automation
- [ ] Improved UX (progress indicators, confirmations)
- [ ] FAQ –∏ troubleshooting guide

### –≠—Ç–∞–ø 3: Production Ready (1 –Ω–µ–¥–µ–ª—è)
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ VPS
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–±–∞–∑–æ–≤—ã–π)
- [ ] –ê–ª–µ—Ä—Ç—ã –¥–ª—è –∞–¥–º–∏–Ω–∞
- [ ] Terms of Service + Privacy Policy
- [ ] Stress testing
- [ ] Security audit

### –≠—Ç–∞–ø 4: –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (Whisper)
- [ ] PDF –æ–±—Ä–∞–±–æ—Ç–∫–∞
- [ ] –í—Ç–æ—Ä–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- [ ] –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (—Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è)
- [ ] Web dashboard –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- [ ] Mobile app (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ö–æ–≥–¥–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é:
- ‚úÖ >50 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ >100K —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ë–î
- ‚úÖ –ù—É–∂–Ω–∞ real-time –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- ‚úÖ –ù—É–∂–µ–Ω multi-tenant
- ‚úÖ –ö–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: MVP vs –ò–¥–µ–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

| –ê—Å–ø–µ–∫—Ç | MVP (–†–µ–∞–ª—å–Ω–æ—Å—Ç—å) | –ò–¥–µ–∞–ª—å–Ω—ã–π –º–∏—Ä |
|--------|------------------|---------------|
| **–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** | 4-6 –Ω–µ–¥–µ–ª—å | 2 –Ω–µ–¥–µ–ª–∏ |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å** | $25-45 | $10 |
| **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** | 70% | 100% |
| **Test coverage** | 60% | 95% |
| **Bugs** | 5-10 –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö | 0 |
| **–ü—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** | 1 | –í—Å–µ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –•–æ—Ä–æ—à–æ –¥–ª—è 10-20 —é–∑–µ—Ä–æ–≤ | –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ |
| **Monitoring** | –ë–∞–∑–æ–≤—ã–π | Production-grade |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ | –ò–¥–µ–∞–ª—å–Ω–∞—è |

**–í—ã–≤–æ–¥:** MVP - —ç—Ç–æ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º.
–¶–µ–ª—å - –±—ã—Å—Ç—Ä–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ—é, –∞ –ø–æ—Ç–æ–º –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ —É–ª—É—á—à–∞—Ç—å.

---

# üöÄ –í–ê–†–ò–ê–ù–¢ 2: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (Production)

[... –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–π,
    –Ω–æ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π ...]

---

**–°–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é**
**—Å–æ –≤—Å–µ–º–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?**
